{% extends 'base.html' %}
{% load static %}

{% block title %}Login - {{ SITE_NAME }}{% endblock %}

{% block content %}
<article style="max-width: 500px; margin: 2rem auto;">
    <header>
        <h1>Welcome Back</h1>
        <p>Log in to manage your bookings</p>
    </header>

    {% if messages %}
    <div>
        {% for message in messages %}
        <p style="padding: 1rem; border-radius: 0.5rem; {% if message.tags == 'error' %}background: var(--del-color); color: white;{% else %}background: var(--ins-color);{% endif %}">
            {{ message }}
        </p>
        {% endfor %}
    </div>
    {% endif %}

    <form method="post" action="{% url 'account_login' %}">
        {% csrf_token %}
        
        <fieldset>
            <legend>Account Details</legend>
            
            <!-- Email -->
            <label for="{{ form.login.id_for_label }}">
                Email Address <span style="color: red;">*</span>
                <input 
                    type="email" 
                    name="{{ form.login.html_name }}"
                    id="{{ form.login.id_for_label }}"
                    placeholder="your@email.com"
                    required
                    autofocus
                    value="{{ form.login.value|default:'' }}">
                {% if form.login.errors %}
                <small style="color: red;">{{ form.login.errors|first }}</small>
                {% endif %}
            </label>

            <!-- Password -->
            <label for="{{ form.password.id_for_label }}">
                Password <span style="color: red;">*</span>
                <input 
                    type="password" 
                    name="{{ form.password.html_name }}"
                    id="{{ form.password.id_for_label }}"
                    placeholder="Enter your password"
                    required>
                {% if form.password.errors %}
                <small style="color: red;">{{ form.password.errors|first }}</small>
                {% endif %}
            </label>

            <!-- Remember Me -->
            <label>
                <input 
                    type="checkbox" 
                    name="{{ form.remember.html_name }}"
                    id="{{ form.remember.id_for_label }}"
                    {% if form.remember.value %}checked{% endif %}>
                Remember me
            </label>
        </fieldset>

        <!-- Non-field errors -->
        {% if form.non_field_errors %}
        <div style="color: red; padding: 1rem; background: var(--del-color); border-radius: 0.5rem; margin-bottom: 1rem;">
            {{ form.non_field_errors }}
        </div>
        {% endif %}

        <footer style="display: flex; flex-direction: column; gap: 1rem;">
            <button type="submit" class="primary">Log In</button>
            <div style="text-align: center;">
                <a href="{% url 'account_reset_password' %}">Forgot password?</a>
                <span style="margin: 0 0.5rem;">â€¢</span>
                <a href="{% url 'account_signup' %}">Create account</a>
            </div>
        </footer>
    </form>

    <section style="margin-top: 2rem; padding: 1rem; background: var(--card-background-color); border-radius: 0.5rem; text-align: center;">
        <p style="margin: 0;">
            <strong>Don't have an account?</strong>
            <br>
            <a href="{% url 'account_signup' %}" role="button" style="margin-top: 0.5rem;">Sign Up Now</a>
        </p>
    </section>
</article>
{% endblock %}

