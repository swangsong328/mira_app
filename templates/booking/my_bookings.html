{% extends 'base.html' %}
{% load static %}

{% block title %}My Bookings{% endblock %}

{% block content %}
<article>
    <header>
        <h1>My Bookings</h1>
    </header>

    {% if bookings %}
        {% for booking in bookings %}
        <article>
            <header>
                <h3>{{ booking.service.name }} - {{ booking.start_time|date:"M d, Y" }}</h3>
                <span class="badge badge-{{ booking.status }}">{{ booking.get_status_display }}</span>
            </header>

            <dl>
                <dt>Confirmation Code</dt>
                <dd>{{ booking.confirmation_code }}</dd>

                <dt>Stylist</dt>
                <dd>{{ booking.staff.get_full_name }}</dd>

                <dt>Date & Time</dt>
                <dd>{{ booking.start_time|date:"l, F j, Y" }} at {{ booking.start_time|time:"g:i A" }}</dd>

                <dt>Duration</dt>
                <dd>{{ booking.service.duration }} minutes</dd>

                <dt>Price</dt>
                <dd>${{ booking.price }}</dd>

                <dt>Status</dt>
                <dd>{{ booking.get_status_display }}</dd>
            </dl>

            {% if booking.status in "pending,confirmed" %}
            <footer>
                <a href="{% url 'cancel_booking' booking.confirmation_code %}" role="button" class="secondary">Cancel Booking</a>
            </footer>
            {% endif %}
        </article>
        {% endfor %}
    {% else %}
        <p>You don't have any bookings yet.</p>
        <a href="{% url 'booking_step1_service' %}" role="button">Book Your First Appointment</a>
    {% endif %}
</article>
{% endblock %}

{% block extra_css %}
<style>
    .badge {
        display: inline-block;
        padding: 0.25rem 0.5rem;
        font-size: 0.875rem;
        border-radius: var(--border-radius);
    }
    .badge-pending { background-color: var(--primary); color: white; }
    .badge-confirmed { background-color: var(--secondary); color: white; }
    .badge-completed { background-color: var(--contrast); color: white; }
    .badge-canceled { background-color: var(--del-color); color: white; }
</style>
{% endblock %}


